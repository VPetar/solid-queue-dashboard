<%= card do %>
  <%= card_header class: "border-b" do %>
    <%= card_title "Jobs" %>
    <%= card_description "List of executed jobs" %>

    <%= form_with url: jobs_path, method: :get, class: "flex flex-row gap-2 !mt-4" do |form| %>
      <%= form.select :status,
        SolidQueueDashboard::Job::STATUSES.map { |status| [status.titleize, status] },
        { include_blank: "All Statuses", selected: params[:status] },
        class: "select",
        data: { auto_submit: true }
      %>

      <div>
        <%= form.select :class_name,
          @unique_class_names.map { |name| [name.titleize, name] },
          { include_blank: "All Jobs", selected: params[:class_name] },
          class: "select",
          data: { auto_submit: true }
        %>

        <% if @arguments_from_job %>
          <p class="text-xs text-center text-muted-foreground mt-0.5">
            with arguments from
            <%= link_to "job ##{@arguments_from_job.id}", job_path(@arguments_from_job), class: "link" %>
          </p>
        <% end %>
      </div>

      <% if params[:class_name].present? || params[:status].present? || @arguments_from_job.present? %>
        <%= button_link "Clear Filters", href: jobs_path, variant: "outline" %>
      <% end %>
    <% end %>
  <% end %>
  <%= card_content class: "!p-0" do %>
    <%= render "solid_queue_dashboard/jobs/table", jobs: @jobs %>
  <% end %>
<% end %>
